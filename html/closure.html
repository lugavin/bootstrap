<!DOCTYPE html>
<html lang="zh-TW">
<head>
    <base href="../">
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1, user-scalable=no">
    <title>JS高级特性-闭包</title>
    <link rel="stylesheet" href="assets/css/app.css">
</head>
<body>
<div class="container">
    <a href="http://www.ruanyifeng.com/blog/2009/08/learning_javascript_closures.html">JS闭包</a>
</div>
<script type="text/javascript">
    /**
     * 一、变量的作用域
     * Javascript语言的特殊之处, 就在于函数内部可以直接读取全局变量, 而在函数外部却无法读取函数内部的局部变量;
     * 此外, 在函数内部声明变量一定要使用var命令, 如果不用的话, 实际上是声明了一个全局变量.
     *
     * 二、如何从外部读取局部变量
     * 出于种种原因, 我们有时候需要得到函数内的局部变量, 但是, 正常情况下, 这是办不到的, 只有通过变通方法才能实现, 那就是在函数的内部再定义一个函数.
     *
     * 三、闭包的概念
     * 闭包的范式: (function(形参) {})(实参);
     * 由于在Javascript语言中, 只有函数内部的子函数才能读取局部变量, 因此可以把闭包简单理解成"定义在一个函数内部的函数",
     * 所以, 在本质上, 闭包就是将函数内部和函数外部连接起来的一座桥梁.
     *
     * 四、闭包的用途
     * (1)读取函数内部的变量;
     * (2)让函数内部变量的值始终保持在内存中.
     *
     * 五、使用闭包的注意点
     * (1)由于闭包会使得函数中的变量都被保存在内存中, 内存消耗很大, 所以不能滥用闭包, 否则会造成网页的性能问题, 在IE中可能导致内存泄露.
     *    解决方法是, 在退出函数之前, 将不使用的局部变量全部删除.
     * (2)闭包会在父函数外部, 改变父函数内部变量的值.
     *    所以, 如果你把父函数当作对象使用, 把闭包当作它的公用方法, 把内部变量当作它的私有属性, 这时一定要小心, 不要随便改变父函数内部变量的值.
     */
    function func() {
        var value = "King";
        return function () {
            return value;
        };
    }
    var f = func();
    console.info(f);
</script>
</body>
</html>